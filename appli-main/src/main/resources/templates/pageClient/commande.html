<!DOCTYPE html>
<html th:replace="base :: html" lang="fr" xmlns:th="http://www.thymeleaf.org">

<div th:fragment="content">
    <div class="py-5">
        <h1 class="mb-4">üì¶ Mes commandes</h1>

        <!-- Aucune commande -->
        <div th:if="${commandes.empty}" class="text-center py-5">
            <div class="display-1 mb-4">üì¶</div>
            <h3 class="mb-3">Aucune commande pour le moment</h3>
            <p class="text-muted mb-4">D√©couvrez nos produits et passez votre premi√®re commande !</p>
            <a th:href="@{/wickle/visiteur/produits}" class="btn btn-primary btn-lg">
                Voir les produits
            </a>
        </div>

        <!-- Liste des commandes -->
        <div th:if="${!commandes.empty}">
            <div class="card mb-3" th:each="commande : ${commandes}">
                <div class="card-body">
                    <div class="row align-items-center">
                        <!-- Informations principales -->
                        <div class="col-md-3">
                            <h5 class="mb-1">Commande <span th:text="${commande.numero}"></span></h5>
                            <p class="text-muted small mb-0">
                                <strong>Date :</strong>
                                <span th:text="${#temporals.format(commande.dateCommande, 'dd/MM/yyyy')}"></span>
                            </p>
                        </div>

                        <!-- Statut -->
                        <div class="col-md-2">
                            <span class="badge bg-warning" th:if="${commande.statut.name() == 'EN_ATTENTE'}">
                                ‚è≥ En attente
                            </span>
                            <span class="badge bg-primary" th:if="${commande.statut.name() == 'VALIDEE'}">
                                ‚úì Valid√©e
                            </span>
                            <span class="badge bg-info" th:if="${commande.statut.name() == 'EXPEDIEE'}">
                                üöö Exp√©di√©e
                            </span>
                            <span class="badge bg-success" th:if="${commande.statut.name() == 'LIVREE'}">
                                ‚úÖ Livr√©e
                            </span>
                            <span class="badge bg-danger" th:if="${commande.statut.name() == 'ANNULEE'}">
                                ‚ùå Annul√©e
                            </span>
                        </div>

                        <!-- Articles -->
                        <div class="col-md-3">
                            <p class="mb-0">
                                <strong th:text="${commande.lignesCommande.size()}"></strong>
                                article<span th:if="${commande.lignesCommande.size() > 1}">s</span>
                            </p>
                        </div>

                        <!-- Montant -->
                        <div class="col-md-2 text-end">
                            <p class="mb-0 fs-5 fw-bold text-primary" th:text="${commande.montantTotal} + '‚Ç¨'"></p>
                        </div>

                        <!-- Action -->
                        <div class="col-md-2 text-end">
                            <a th:href="@{'/wickle/client/commandes/' + ${commande.id}}"
                               class="btn btn-primary btn-sm">
                                Voir le d√©tail
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

</html>